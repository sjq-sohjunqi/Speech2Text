{% extends "base.html" %}
    <script>
    $(document).ready(function(){
      alert(i);
     var group_list=[];
     function load_group_list(){
      $.getJSON('/group_list', function(data, status, xhr){
        console.log(data);
       for (var i = 0; i < data.length; i++ ) {

        group_list.push(data[i].group_name);
       }
     });
     };
     load_group_list();

     $('#group_name').autocomplete({
      source: group_list,
     });

     $('formSearch').on('submitSearch', function(e){
      $.ajax({
       data: {
        group_name:$('#group_name').val()
       },
       type: 'POST',
       url : '/process'
      })
      .done(function(data){
       if (data.error){
        $('#result').text(data.error).show();
       }
       else {
        $('#result').html(data.group_name).show()
       }
      })
      e.preventDefault();
     });
    });
    </script>

{% block content %}
	<h1>Create New Group:</h1>

	<form>
	{{formSearch.group_name(class="form-control")}}
   <button type="submitSearch" class="btn btn-info">Submit</button>
   </form>

	<form action="" method="post" novalidate>
		{{ groupform.hidden_tag() }} <!Protects against CSRF>
		<p>
			{{ groupform.grpname.label }}<br>
			{{ groupform.grpname(size=32) }}<br>
			{% for error in groupform.grpname.errors %}
			<span style="color: red;">[{{ error }}]</span>
			{% endfor %}
		</p>

		<p>{{ groupform.add() }}</p>
	</form>


	<h2>Your Groups:</h2>
	<table>
		<tr>
			<th>Name</th>
			<th>Leaders</th>
			<th>Members</th>
		</tr>
		{% for grp in grpsTable %}
			<tr>
				<td>{{ grp.group_name }}</td>
				<td></td>
				<td></td>
			</tr>
		{% endfor %}
	</table>

{% endblock %}
